(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46121,e=>{"use strict";var t=e.i(34105),s=e.i(76e3);function a({header:e,body:a,footer:l}){let[r,i]=(0,s.useState)(null),[n,o]=(0,s.useState)([]),[d,c]=(0,s.useState)([]),x=(0,s.useMemo)(()=>{let e=[...a];if(!r)return e;let{key:t,direction:s}=r;return[...e].sort((e,a)=>{let l=e[t],r=a[t];if(null==l)return 1;if(null==r)return -1;let i=0;return i="number"==typeof l&&"number"==typeof r?l-r:String(l).localeCompare(String(r),"pl",{numeric:!0,sensitivity:"base"}),"asc"===s?i:-i})},[a,r]),m=(0,s.useMemo)(()=>new Set(d),[d]),p=(0,s.useMemo)(()=>{let e=[],t=[];for(let s of x)m.has(s.id)?t.push(s):(t.length&&(e.push({type:"collapsed",rows:t}),t=[]),e.push({type:"row",row:s}));return t.length&&e.push({type:"collapsed",rows:t}),e},[x,m]),u=(0,s.useMemo)(()=>p.filter(e=>"row"===e.type).map(e=>e.row.id),[p]),y=u.length>0&&u.every(e=>n.includes(e)),h=()=>{i(null),c([]),o([])};return(0,t.jsxs)("div",{className:"w-full overflow-x-auto rounded-xl border border-slate-200 bg-white shadow-sm",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 border-b border-slate-200 p-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Tabela z sortowaniem i grupowaniem"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Zaznacz wiersze i użyj przycisku, aby je ukryć. Użyj przycisków w nagłówku, aby sortować."})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>{n.length&&(c(e=>Array.from(new Set([...e,...n]))),o([]))},disabled:!n.length,className:"inline-flex items-center justify-center rounded-lg border border-slate-300 bg-slate-900 px-3 py-2 text-xs font-medium text-white disabled:cursor-not-allowed disabled:border-slate-200 disabled:bg-slate-100 disabled:text-slate-400",children:["Ukryj zaznaczone (",n.length,")"]})]}),(0,t.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[(0,t.jsx)("thead",{className:"bg-slate-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"w-10 px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:(0,t.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:y,onChange:()=>{y?o(e=>e.filter(e=>!u.includes(e))):o(e=>Array.from(new Set([...e,...u])))}})}),e.map(e=>(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide text-slate-500",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsxs)("div",{className:"inline-flex rounded-md border border-slate-200 bg-white",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{i({key:e.key,direction:"asc"}),c([]),o([])},className:"px-1 text-[10px] leading-none hover:bg-slate-100",children:"↑"}),(0,t.jsx)("button",{type:"button",onClick:()=>{i({key:e.key,direction:"desc"}),c([]),o([])},className:"px-1 text-[10px] leading-none hover:bg-slate-100",children:"↓"}),(0,t.jsx)("button",{type:"button",onClick:h,className:"px-1 text-[10px] leading-none hover:bg-slate-100",children:"↺"})]})]})},e.key))]})}),(0,t.jsxs)("tbody",{className:"divide-y divide-slate-200 bg-white",children:[p.map((s,a)=>{if("row"===s.type){let a=s.row;return(0,t.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-3 py-2",children:(0,t.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300",checked:n.includes(a.id),onChange:()=>{var e;return e=a.id,void o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}})}),e.map(e=>(0,t.jsx)("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-slate-700",children:a[e.key]},e.key))]},a.id)}let l=s.rows.map(e=>e.id),r=s.rows.length;return(0,t.jsx)("tr",{className:"bg-slate-100",children:(0,t.jsx)("td",{className:"px-3 py-3 text-xs font-medium text-slate-600",colSpan:e.length+1,children:(0,t.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 sm:flex-row sm:items-center",children:[(0,t.jsxs)("span",{children:["Ukryto ",r," wierszy. Możesz je przywrócić jednym kliknięciem."]}),(0,t.jsx)("button",{type:"button",onClick:()=>{c(e=>e.filter(e=>!l.includes(e)))},className:"inline-flex items-center justify-center rounded-full border border-slate-300 bg-white px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-200",children:"Pokaż ukryte wiersze"})]})})},`collapsed-${a}`)}),0===p.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"px-3 py-4 text-center text-sm text-slate-500",colSpan:e.length+1,children:"Brak danych do wyświetlenia."})})]}),l&&l.length>0&&(0,t.jsx)("tfoot",{className:"border-t border-slate-200 bg-slate-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-3 py-2 text-xs font-semibold uppercase tracking-wide text-slate-500"}),e.map((e,s)=>(0,t.jsx)("td",{className:"px-3 py-2 text-xs font-semibold uppercase tracking-wide text-slate-700",children:l[s]??""},e.key))]})})]})]})}var l=e.i(2602),r=e.i(43038);e.i(36180);var i=e.i(98925);let n=[{key:"name",label:"Nazwa"},{key:"category",label:"Kategoria"},{key:"price",label:"Cena [PLN]"},{key:"stock",label:"Stan magazynowy"}],o=[{id:"1",name:"Klawiatura mechaniczna",category:"Peripherals",price:299,stock:12},{id:"2",name:"Mysz bezprzewodowa",category:"Peripherals",price:149,stock:34},{id:"3",name:'Monitor 27"',category:"Display",price:1299,stock:7},{id:"4",name:'Laptop 15"',category:"Computers",price:3999,stock:4},{id:"5",name:"Słuchawki",category:"Audio",price:249,stock:18},{id:"6",name:"Głośniki biurkowe",category:"Audio",price:199,stock:9},{id:"7",name:"Dysk SSD 1TB",category:"Storage",price:399,stock:25},{id:"8",name:"Dysk HDD 2TB",category:"Storage",price:349,stock:15}],d=o.reduce((e,t)=>e+t.price,0),c=["Suma","",`${d} PLN`,""];function x(){let{user:e}=(0,r.useAuth)(),[d,x]=(0,s.useState)(!1),[m,p]=(0,s.useState)(""),u=async()=>{if(!e)return void p("Musisz być zalogowany, aby zapisać dane.");x(!0),p("");try{let t=o.map(t=>(0,i.addDoc)((0,i.collection)(l.db,"tableRows"),{userId:e.uid,rowId:t.id,name:t.name,category:t.category,price:t.price,stock:t.stock,createdAt:(0,i.serverTimestamp)()}));await Promise.all(t),p("Dane tabeli zostały zapisane w bazie.")}catch(e){p("Błąd zapisu danych: "+e.message)}finally{x(!1)}};return(0,t.jsxs)("section",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("header",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Komponent tabeli (temat 3)"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 max-w-2xl",children:"Tabela generowana na podstawie tablic header, body, footer. Nagłówki mają sortowanie, a zaznaczone wiersze można grupowo ukrywać i przywracać. Dane mogą zostać zapisane do Firestore."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:u,disabled:d,className:"rounded-md bg-emerald-600 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-500 disabled:cursor-not-allowed disabled:bg-emerald-300",children:d?"Zapisywanie...":"Zapisz dane do bazy"}),m&&(0,t.jsx)("span",{className:"rounded-md bg-slate-100 px-3 py-1 text-sm font-medium text-slate-900",children:m})]}),(0,t.jsx)(a,{header:n,body:o,footer:c})]})}e.s(["default",()=>x],46121)}]);