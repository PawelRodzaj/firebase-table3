(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32551,e=>{"use strict";var s=e.i(34105),t=e.i(76e3),a=e.i(43038);e.i(51718);var l=e.i(18357),d=e.i(2602);e.i(36180);var r=e.i(98925);function i(){let{user:e}=(0,a.useAuth)(),[i,o]=(0,t.useState)(""),[c,n]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[x,p]=(0,t.useState)(""),[b,h]=(0,t.useState)(""),[f,j]=(0,t.useState)(!0),[y,g]=(0,t.useState)(""),[N,v]=(0,t.useState)("");if((0,t.useEffect)(()=>{e&&(o(e.displayName||""),n(e.photoURL||""),(async()=>{try{let s=await (0,r.getDoc)((0,r.doc)(d.db,"users",e.uid));if(s.exists()){let e=s.data();e.address&&(m(e.address.city||""),p(e.address.street||""),h(e.address.zipCode||""))}}catch(e){g("Nie udało się pobrać adresu użytkownika.")}finally{j(!1)}})())},[e]),!e)return null;let w=async s=>{s.preventDefault(),g(""),v("");try{await (0,l.updateProfile)(e,{displayName:i,photoURL:c}),await (0,r.setDoc)((0,r.doc)(d.db,"users",e.uid),{address:{city:u,street:x,zipCode:b}},{merge:!0}),v("Profil został zaktualizowany.")}catch(e){g("Błąd aktualizacji profilu: "+e.message)}};return(0,s.jsxs)("main",{className:"max-w-lg space-y-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"Profil użytkownika"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[e.photoURL?(0,s.jsx)("img",{src:e.photoURL,alt:"Avatar użytkownika",className:"h-16 w-16 rounded-full object-cover"}):(0,s.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-slate-200 text-sm text-slate-600",children:"Brak zdjęcia"}),(0,s.jsxs)("div",{className:"text-sm text-slate-700",children:[(0,s.jsx)("div",{children:e.displayName||"Bez nazwy wyświetlanej"}),(0,s.jsx)("div",{className:"text-slate-500",children:e.email})]})]}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4 rounded-xl bg-white p-5 shadow",children:[y&&(0,s.jsx)("div",{className:"rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700",children:y}),N&&(0,s.jsx)("div",{className:"rounded-md border border-emerald-300 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:N}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Nazwa wyświetlana"}),(0,s.jsx)("input",{name:"displayName",value:i,onChange:e=>o(e.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 outline-none focus:border-slate-500 focus:ring-1 focus:ring-slate-500"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Email"}),(0,s.jsx)("input",{disabled:!0,value:e.email||"",className:"w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-500"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Adres zdjęcia profilowego (URL)"}),(0,s.jsx)("input",{name:"photoURL",value:c,onChange:e=>n(e.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 outline-none focus:border-slate-500 focus:ring-1 focus:ring-slate-500"})]}),(0,s.jsxs)("fieldset",{className:"space-y-3 rounded-md border border-slate-200 p-3",children:[(0,s.jsx)("legend",{className:"px-1 text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Adres"}),f?(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Ładowanie adresu..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Miasto"}),(0,s.jsx)("input",{name:"city",value:u,onChange:e=>m(e.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 outline-none focus:border-slate-500 focus:ring-1 focus:ring-slate-500"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Ulica"}),(0,s.jsx)("input",{name:"street",value:x,onChange:e=>p(e.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 outline-none focus:border-slate-500 focus:ring-1 focus:ring-slate-500"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Kod pocztowy"}),(0,s.jsx)("input",{name:"zipCode",value:b,onChange:e=>h(e.target.value),className:"w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 outline-none focus:border-slate-500 focus:ring-1 focus:ring-slate-500"})]})]})]}),(0,s.jsx)("button",{type:"submit",className:"mt-2 rounded-md bg-slate-900 px-3 py-2 text-sm font-medium text-white hover:bg-slate-800",children:"Zapisz zmiany"})]})]})}e.s(["default",()=>i])}]);